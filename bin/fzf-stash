#!/usr/bin/env bash

# Verifica los argumentos del script
case $1 in
    show)
        preview='echo {} | awk -F":" "{print \$1}" | xargs -I {} git stash show -p {}'
        ;;
    ls)
        preview='echo {} | awk -F":" "{print \$1}" | xargs -I {} git stash show --name-only {}'
        ;;
    h|help)
        echo "Usage: $0 {show|ls}"
        exit 1
        ;;
    *)
        preview='echo {} | awk -F":" "{print \$1}" | xargs -I {} git stash show -p {}'
esac

# Ejecuta fzf con la vista previa seleccionada
git stash list | fzf --preview "$preview" --preview-window=right:70%:wrap
