#!/usr/bin/env python3

import os
import pathlib

_dotfiles = os.getenv("DOTFILES", "")
dotfiles = pathlib.Path(_dotfiles)

i3config = dotfiles / "i3/.config/i3/config"

# if i3config.exists():
#     print(f"reading {i3config}")
# else:
#     print("no content")

comment = None
text = i3config.read_text().split("\n")
for i, line in enumerate(text):
    line = line.strip()

    if line.startswith("##"):
        comment = (i, line)
        continue
    elif line.startswith("bindsym"):
        _, keymap, *cmd = line.split()
        if comment and ((i-1) == comment[0]):
            out = f"{keymap}: {comment[1]}"
            comment = None
        else:
            out = f"{keymap}: {' '.join(cmd)}"

        print(out)
        continue



# vim: ft=python ts=4 sts=4 sw=4 et:
